# Coze API Web UI 开发计划

## 项目背景

Coze API 项目提供了图片转视频的后端服务，但目前缺少直观的Web界面来测试和使用这些API功能。本计划旨在开发一个基于Vue.js的Web UI，方便用户在浏览器中直接访问和测试所有API功能。

## 现有API功能分析

通过对代码的分析，当前项目提供以下主要API功能：

### 上传功能 (/api/upload)
- `/api/upload/image` (POST): 上传图片文件
- `/api/upload/audio` (POST): 上传音频文件

### 视频管理 (/api/video)
- `/api/video/create` (POST): 创建视频，支持设置动画效果、转场效果和音频
- `/api/video/list` (GET): 获取已生成的视频列表
- `/api/video/get/<filename>` (GET): 获取特定的视频文件

### 其他API
- `/api/health` (GET): 健康检查，用于检测API服务状态
- `/uploads/<path>` (GET): 访问上传的文件
- `/videos/<path>` (GET): 访问生成的视频文件

## 数据模型

主要数据模型为`ImageItem`，包含以下属性：
- `id`: 唯一标识符
- `image_path`: 图片路径
- `text`: 文本描述
- `audio_path`: 关联音频文件路径
- `duration`: 在视频中显示的时长
- `animation`: 动画效果设置
- `order`: 在视频中的排序

## Web UI 需求

### 功能需求

1. **用户认证**（未来扩展）
   - 登录/注册界面
   - 用户会话管理

2. **主界面**
   - 导航菜单，包含所有主要功能区域
   - 状态指示器，显示API服务连接状态

3. **图片管理**
   - 上传图片界面
   - 已上传图片库/预览
   - 删除和管理上传的图片

4. **音频管理**
   - 上传音频界面
   - 已上传音频库/预览器
   - 音频播放和管理功能

5. **视频创建**
   - 添加/排序图片到视频时间线
   - 为每张图片配置动画效果
   - 为每张图片关联音频
   - 设置转场效果参数
   - 设置视频输出参数（帧率、质量等）
   - 视频创建进度显示

6. **视频管理**
   - 视频列表展示
   - 视频播放器
   - 视频下载选项
   - 视频详情查看

7. **API测试面板**
   - 测试所有API端点的接口
   - 显示API请求和响应
   - 保存API测试历史

8. **系统状态**
   - 服务器健康状态监控
   - 资源使用情况（如果API提供相关数据）

### 技术需求

1. **前端框架**
   - Vue.js 3 + Vite
   - 组件库：Element Plus
   - 状态管理：Pinia
   - 路由：Vue Router

2. **API通信**
   - Axios用于API请求
   - 请求拦截器处理认证和错误
   - 合理的错误处理和用户反馈

3. **UI/UX设计**
   - 响应式布局，支持桌面和移动设备
   - 主题定制选项
   - 动画和过渡效果，提升用户体验

4. **数据持久化**
   - 本地存储API响应和设置
   - 实现草稿保存功能

5. **部署配置**
   - 开发环境配置
   - 生产环境构建优化
   - 与后端API服务集成配置

## 项目结构

```
web/
│
├── public/              # 静态资源
│   └── favicon.ico
│
├── src/                 # 源代码
│   ├── assets/          # 静态资源
│   │   ├── logo.png
│   │   └── styles/      # 样式文件
│   │
│   ├── components/      # 组件
│   │   ├── common/      # 通用组件
│   │   ├── upload/      # 上传相关组件
│   │   ├── video/       # 视频相关组件
│   │   └── audio/       # 音频相关组件
│   │
│   ├── views/           # 页面
│   │   ├── Home.vue     # 主页
│   │   ├── Upload.vue   # 上传页面
│   │   ├── Videos.vue   # 视频管理页面
│   │   ├── Creator.vue  # 视频创建页面
│   │   └── ApiTest.vue  # API测试页面
│   │
│   ├── router/          # 路由配置
│   │   └── index.js
│   │
│   ├── store/           # 状态管理
│   │   ├── modules/
│   │   └── index.js
│   │
│   ├── api/             # API服务
│   │   ├── upload.js    # 上传相关API
│   │   ├── video.js     # 视频相关API
│   │   └── index.js     # API入口
│   │
│   ├── utils/           # 工具函数
│   │   ├── request.js   # Axios封装
│   │   └── validators.js # 验证函数
│   │
│   ├── App.vue          # 根组件
│   └── main.js          # 入口文件
│
├── .env                 # 环境变量
├── .env.development     # 开发环境变量
├── .env.production      # 生产环境变量
├── vite.config.js       # Vite配置文件
├── package.json         # 依赖配置
└── README.md            # 项目说明
```

## 开发任务分解

### 阶段1：项目搭建与基础功能（2天）

1. 项目初始化
   - 创建Vue项目
   - 配置路由和状态管理
   - 设置基础样式和主题

2. 基础组件开发
   - 页面布局组件
   - 导航菜单
   - 状态指示器
   - 通用表单组件

3. API服务层
   - 封装Axios请求
   - 实现API模块
   - 配置开发代理

### 阶段2：核心功能开发（4天）

1. 上传功能实现
   - 图片上传组件
   - 音频上传组件
   - 上传预览与管理

2. 视频创建功能
   - 图片时间线组件
   - 动画效果配置面板
   - 转场效果选择器
   - 音频关联与预览
   - 参数设置面板

3. 视频管理功能
   - 视频列表组件
   - 视频播放器组件
   - 视频详情组件

### 阶段3：高级功能与优化（3天）

1. API测试面板
   - 请求构建器
   - 响应查看器
   - 测试历史记录

2. 用户体验优化
   - 添加响应式支持
   - 优化加载和错误状态
   - 实现进度指示和反馈

3. 性能优化
   - 组件懒加载
   - 资源优化
   - 缓存策略

### 阶段4：测试与部署（1天）

1. 测试
   - 功能测试
   - 兼容性测试
   - 性能测试

2. 文档
   - 用户使用文档
   - 开发文档更新

3. 部署
   - 构建生产版本
   - 配置与后端集成

## 技术选型详情

1. **核心框架**
   - Vue.js 3.x：使用Composition API，更好的类型支持和性能
   - Vite：快速的开发服务器和构建工具

2. **UI组件库**
   - Element Plus：成熟的Vue 3组件库，提供丰富的UI组件

3. **状态管理**
   - Pinia：轻量且类型安全的状态管理，Vue 3官方推荐

4. **HTTP客户端**
   - Axios：功能丰富的HTTP客户端，支持拦截器和请求配置

5. **工具库**
   - Lodash：提供实用的JavaScript工具函数
   - Day.js：轻量级日期处理库

6. **开发工具**
   - ESLint：代码质量检查
   - Prettier：代码格式化
   - TypeScript：类型检查和增强开发体验

## 开发进度记录

### 已完成
- ✅ 项目初始化
- ✅ 路由配置
- ✅ API服务层开发
- ✅ 状态管理配置
- ✅ 基础UI组件开发
  - ✅ 应用布局
  - ✅ 顶部导航栏
  - ✅ 侧边菜单
  - ✅ 首页视图
- ✅ 上传功能实现
  - ✅ 图片上传组件
  - ✅ 音频上传组件
  - ✅ 上传列表与预览
- ✅ 环境配置与部署文档
  - ✅ 开发环境配置
  - ✅ 生产环境配置
  - ✅ 部署指南文档

### 待开始
- ⬜ 视频创建功能
  - ⬜ 图片时间线组件
  - ⬜ 动画效果配置面板
  - ⬜ 转场效果选择器
  - ⬜ 音频关联与预览
  - ⬜ 参数设置面板
- ⬜ 音频创建功能
  - ⬜ 文本转音频界面
  - ⬜ 音频参数配置
  - ⬜ 音频预览与保存
- ⬜ 视频管理功能
  - ⬜ 视频列表组件
  - ⬜ 视频播放器组件
  - ⬜ 视频详情组件
- ⬜ API测试面板
- ⬜ 性能优化
- ⬜ 测试与部署

## 风险与挑战

1. **API兼容性**：需确保Web UI与后端API完全兼容，包括请求格式和响应处理。
2. **文件处理**：处理大型文件上传和视频处理可能带来性能挑战。
3. **动画效果配置**：需要设计直观易用的界面来配置复杂的动画参数。
4. **多浏览器兼容性**：确保在各主流浏览器中的一致体验。

## 未来扩展

1. **用户认证系统**：实现基于JWT的用户认证。
2. **项目管理**：允许用户创建和管理多个视频项目。
3. **更丰富的视频编辑**：添加更多高级视频编辑功能。
4. **协作功能**：支持多用户协作编辑视频项目。
5. **数据分析**：添加使用统计和分析功能。

## 结论

本Web UI开发计划旨在为Coze API项目提供一个现代、直观且功能完善的浏览器界面，使用户能够充分利用后端API提供的所有功能。通过清晰的任务分解和开发进度记录，确保项目能按计划完成并满足用户需求。 